<font size=6>**欧奈尔RPS曲线的编制方法及常见问题解答(20170505)**</font>



如何编制欧奈尔RPS曲线是本公众号的独门秘籍。本文重新综合整理了编制方法及常见问题解答。

 

**目前大天朝A股的欧奈尔RPS曲线必须剔除新股的影响。**

 

目前一年内上市交易的A股已经超过了300只，占所有A股数量的比重已经达10%。因为大天朝A股的奇葩新股上市交易制度，目前新股上市后，都是连续一字板，所有股票的一年或者半年涨幅的前10%，基本上都被新股占据了。所以，目前大天朝A股的欧奈尔RPS曲线必须剔除新股的影响。

 

**第一步，新建一个“上市一年以上”的自定义板块。**

 

我们首先需要建立一个排除上市时间不足一年股票的板块。这个板块我取名为：上市一年以上。通达信软件的菜单—工具—自定义板块设置—新建板块。下图中，点击确定，就建立了“上市一年以上”板块，但板块中的股票需要另外添加。

 

![image-20210424171900142](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424171900142.png)



参考百度：通达信怎样建立自己的股票板块

http://jingyan.baidu.com/article/5225f26b51f729e6fb090879.html?st=2&net_type=&bd_page_type=1&os=0&rst=&word=%E5%A6%82%E4%BD%95%E5%BB%BA%E7%AB%8B%E8%BF%9E%E6%8E%A5

 

有两个途径将股票添加到这个“上市一年以上”板块。

 

第一个途径。在通达信软件界面，输入：60，进入沪深A股板块，点击键盘右下角向右移动光标的键，直到找到“上市日期”这一列，点击一下，让所有A股按照顺序排列，然后输入“34”进行“数据导出”，选中”Excel文件“和“报表中所有数据“，导出后将一年内上市的股票删除，选中剩下的股票代码，复制到剪切板。

![image-20210424172845144](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424172845144.png)

然后，导入“上市一年以上”这个板块（通达信软件的菜单—工具—自定义板块设置—上市一年以上—从文本中导入—粘贴—确定）。



![image-20210424172904214](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424172904214.png)



 **我剔除了2016年6月1日及之后开始上市的股票，目前总共有2882只股票。

 

第二个是建立一个条件选股公式来选股到“上市一年以上”这个板块。条件选股公式很简单，如下：BARSCOUNT(C)>N; N为参数，一般设为250

 

通达信软件，Control+F，条件选股公式—其他类型

 

![image-20210424173111915](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173111915.png)



点击上图中的新建，进入下图：

 

![image-20210424173125839](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173125839.png)



点击上图中的确定，即完成建立公式。然后选股到这样板块：通达信软件，Control+T，条件选股公式的下拉菜单中，选中：上市一年以上，选股范围为：沪深A股，然后点：加入条件，如下图：

 ![image-20210424173241595](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173241595.png)



上图中，点击：选股入板块，再选中“上市一年以上”，确定，确定，最后选中2830只股票。这一步骤OVER。

 

**友情提醒：这个“上市一年以上“板块中的股票，需要手动更新，建议您一个月更新一次即可。**

 

**第二步，新建一个技术指标的公式。**

建立一个小公式，命名为“EXTRS”，用来计算股票涨跌幅

EXTRS:(C-REF(C,N))/REF(C,N);

N缺省值为250。

通达信软件，Control+F，技术指标公式—其他类型

 

![image-20210424173303324](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173303324.png)



点击上图中的新建，进入下图：

 

![image-20210424173316177](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173316177.png)



点击上图中的确定，即完成建立公式。

 

**建议您无脑复制我的公式，如果您自己输入，有可能会少输入一点东东（例如右括号），而导致公司不能通过测试。**

 

**第三步，建立扩展数据，对股票涨幅进行排序。**

通达信软件输入：.902，进入扩展数据管理器。 选中第1条扩展数据，如下图：

 

![image-20210424173342544](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173342544.png)



点击上图中的修改，在扩展数据属性里首先设置数据1如下：

技术指标公式选择新建的“EXTRS”指标

计算参数为120（对应半年期的RPS）

计算时段为本地所有数据

计算品种为“自定义板块”下面的“上市一年以上”这个板块

勾选“精确复权”及“生成横向排名数据”

排名方法为“0-1000归一化顺序”

 

![image-20210424173357977](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173357977.png)



再重复上述步骤， 在扩展数据属性里首先设置数据2，计算参数为250（对应一年期的RPS）。

 

![image-20210424173413927](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173413927.png)



**第四步，再新建一个技术指标公式：股价相对强度RPS。**

通达信软件，Control+F，技术指标公式—其他类型—新建：

 

![image-20210424173427494](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173427494.png)

 

股价相对强度RPS, 出两条彩线的代码如下：

X:=EXTDATA_USER(1,0);{120天的}

RPS120:X/10,LINETHICK2,COLORGREEN;

IF(RPS120>=M,RPS120,DRAWNULL),LINETHICK2,COLORRED;

;

Y:=EXTDATA_USER(2,0);{250天的}

RPS250:Y/10,LINETHICK2,COLORWHITE;

IF(RPS250>=M,RPS250,DRAWNULL),LINETHICK2,COLORRED;

 

M是参数，可以根据自己的偏好设为85-90，我个人偏好90。意思就是RPS大于90时，显示为红线。

 

**第五步，确保下载完整的历史数据。**

**切记1：下载完整的历史数据！这个只需要操作一次。**

通达信软件的菜单—系统—盘后数据下载：请自行修改下载的开始时间

 

![image-20210424173453571](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173453571.png)



**切记2：，需要每天存盘下载日线数据，并全部刷新两条扩展数据。这个操作每天收盘后，都需要进行一次，才能显示最新的RPS曲线。**

 

![image-20210424173516420](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173516420.png)

 ![image-20210424173529381](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173529381.png)

然后在股票K线界面输入：RPS。就出现两条RPS曲线了。如某只股票的RPS曲线如下图，绿线为半年期RPS，白线为一年期RPS，超过90时，显示为红线，一目了然。



![image-20210424173548687](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173548687.png)

 

以下最常见问题及解答：

问：关于那个公式编辑。到extrs:(c-ref(c,n)/ref(c,n)。这里，说语句错误。我看你图片中语句的extrs变颜色，我的还是黑色，不是大小写问题，也没打错，就那几个字母，求解

答：晕。请您认真一点。您的公式输错了。请无脑复制我的公式。

 

问：陶博士，请教一下，我按你的方法设置RPS，为何大华股份11月27日的半年和一年的数值和你的不一样，明明都是按照你的方法设置了呀？

答：可能是您的历史数据不全？请重新下载全部历史数据？然后刷新扩展数据。

 

问：怎么刷新扩展数据？

答：通达信软件输入：.902，进入扩展数据管理器。选中所有扩展数据，点击“全部刷新”。

 

问：博士，为什么我的RPS曲线总是最后几天不显示？

答：下载数据，每天刷新扩展数据。

 

问：陶博士，您好。请问您用的通达信软件是付费的，我下载了免费的没法导入上市一年以上的自定义板块。请问还有没有其他的软件可以使用？谢谢

答：我就是用的证券公司提供的免费软件。很多证券公司的软件都是以通达信为基础的，都可以实现。我没有使用过专门的通达信软件。

 

 

问：如何快速查看所有RPS大于87的股票？

答：可以在选股公式器里选择综合选股——技术指标选股——其他类型——RPS（条件设置选择RPS250大于87）建立股票池来观察。

 

问：扩展数据管理器中，数据1和数据2的参数，会同步变化，点进去之后，显示是一样的。要么都是120，要么都是250。

答：我的经验，只要扩展数据管理器中，显示的参数分别是120和250就可以了。如下图：

 

![image-20210424173601311](欧奈尔RPS曲线的编制方法及常见问题解答(20170505).assets/image-20210424173601311.png)



 

问：RPS如何应用？

答：本公众号对话框中仅回复：010，将向您推送“欧奈尔RPS应用举例”的文章，或者请您阅读欧奈尔的《笑傲股市》。 





网友分享：

陶博士，旧电脑设置RPS一直是一条线，怎么下载数据都不行。换了一台新电脑，同样的方法居然搞好了。所以有时候很多问题就是重启电脑或者换台电脑这么简单！上墙让他们看看

 

网友分享：

陶博士，您好！关于RPS有一位网友的问题：“关于RPS，发现一现象。1.如剔除上市不足一年的新股，计算瞬间结束。如选沪深A股计算时间较长，能出现两条线。此外选自定义板块（剔除上市不足一年的新股）计算结束后，点修改发现计算品种显示是空白。2.如先选沪深A股，计算结束后删除，重建用自定义板块能出现两条。如果用数据清理清除缓存中间数据或首次建数据，RPS只能一条线。3原因可能出在软件上，表面接受自定义板块其实不接受，从计数刷新时间和建完后修改发现自定义板块是空白判断”，我也遇到这个问题，后来我把“上市一周年”这个自定义板块的名字改成汉语拼音首字母"SSYZN"，然后系统就接收了，在扩展数据管理器窗口，点击刷新后就系统就会正常计算1-2分钟，然后RPS数值也就是剔除新股后的数值了。

 

网友分享：

帮博士解答好多人提的RPS设置问题：若不正常，建议删除原来的数据1和数据2,重新建立。我原来按第一篇文章建好后，再按第二篇剔除新股后的方法修改数据(没有删除后重建)，始终只一条线。

 

网友分享：

说点自己设置rps的经验。1 之前看留言，很多人说120和250会同步变化，我也遇到这个情况了。首先可以设置两个不同的参数，分别对应120和250，分别引用。不懂的可以照猫画虎，自己研究。其次建议不用现在的通达信股票软件，重新从证券公司下载一个干净的软件。我就是通过这两个方法解决的，现在的rps数值计算的几个股票，和陶博士公布的基本一致。2 可以给rps参数增加一个颜色，比如大于87为黄色，大于95为红色，线条加粗。这样更加明显和直观。代码如下：X:=EXTDATA_USER(1,0); RPS120:X/10;IF((X/10)>=87,RPS120,DRAWNULL),LINETHICK1,COLORYELLOW;IF((X/10)>=95,RPS120,DRAWNULL),LINETHICK2,COLORRED;

 

（本文完成于2017年5月5日）